# 离散数学 5 函数

## 函数的定义

非空集合A、B。设f为A到B的二元关系，若 $\forall x \in Dom(f), \exist ! y \in Ran(f) $ 使得 $(x, y)\in f$ 成立，称f为 **函数**

函数也称作 **映射** 或 **变换**

如果 $a \notin Dom(f)$ 那么 $f(a) = \Phi$

如果 $f(a) = \{b\}$，习惯上用元素b代替集合{b}，写作 $f(a) = b$

f也可以被描述为有序对的集合 $\{(a, f(a))|a\in Dom(f)\}$

$y = f(x)$ 中，x称为 **自变量**，y称为 **f在x的值** 或 **x在f作用下的像**

非空集合A、B，f是A到B的一个关系，如果对每个 $x \in A, \exist!y \in B$ 使得 $(x, y)\in f$，则称f为 **A到B的函数**，记作 $f:A\rightarrow B$

对于A到B的函数f，$Dom(f) = A, Ran(f) \subseteq B$

- $f(x) = \sqrt{x}$ 不是R到R的函数（定义域不是R）！

如果是 **元素的映射**，应该使用 $a \mapsto b=f(a) $

A为任一非空集合。**A上的恒等函数** 记作 $1_A(a) = a$

## 函数的性质

设函数 $f:A\rightarrow B$

- 若 $Ran(f) = B$，则称f是 **满射(surjection)** 或 **映上的(onto)**
- 若 $\forall y \in Ran(f), \exist! x \in A$ 使得 $f(x) = y$ 则称 $f:A\rightarrow B$ 是 **单射(injection)** 或 **一一的(one to one)**
- 若f既是满射，又是单射，则称f是 **双射(bijection)** 或 **一一对应(one to one correspondence)**

对于有限集合A、B：

- 若满足 $|A| = |B|$ ，则函数 $f:A\rightarrow B$ 是单射 **当且仅当** f是满射。
- 若$|A| < |B|$ ，则必存在从A到B的单射函数、必然不存在满射函数
- 若$|A| > |B|$ ，则必存在A到B的满射函数、必不存在单射函数
- 若$|A| = |B|$ ，则必存在A到B的双射函数

推论：

- 不存在有限集到无限集的满射函数
- 不存在无限集到有限集的单射函数

## 函数的复合

**定理1**：集合A、B、C，f是A到B的关系，g是B到C的关系。若f，g是函数，则：

- $g\circ f$ 也是函数，且满足：
  - $Dom(g \circ f) = \{x|x\in Dom(f) \and f(x) \in Dom(g)\}$
  - $\forall x \in Dom(g\circ f), g\circ f(x) = g(f(x))$ 

**定理2**：

- 满射与满射的复合依然是满射
- 双射与双射的复合依然是双射
- 单射与单射的复合依然是单射

但定理2的逆定理不全成立：

- 若 $g \circ f$ 是单射，则f是单射 
- 若 $g \circ f$ 是满射，则g是满射
- 若 $g \circ f$ 是双射，则f是单射，g是满射

**定理3**：函数与恒等函数的任意顺序复合依然是函数本身

## 逆函数

集合A、B，若函数 $f:A\rightarrow B$ 作为关系的逆关系 $f^{-1}$ 是B到A的函数，则称之为 **可逆的**，此时称 $f^{-1}$ 为 $f$ 的 **反函数** 或 **逆函数**

**定理1**：集合A、B，设 $f:A\rightarrow B$，若函数 $f^{-1}$ 存在则：

- $f^{-1}\circ f = 1_A$
- $f \circ f^{-1} = 1_B$

**定理2（逆函数存在的充要条件）**：

- f可逆 **iff** f是双射
- 如果f逆函数存在，也一定是双射

**定理3**：若函数 $f:A\rightarrow B$ 和 $g:B\rightarrow A$ 满足 $g \circ f = 1_A$ 和 $f \circ g = 1_B$，则f是一个A到B的双射，g是一个B到A的双射，且f和g互为逆函数。

这个定理也可以用于等价地定义反函数。

## 计算机科学中常用函数

### 使用序列表示集合

设全集U，对任意集合 $A\subseteq U$ 可定义A的 **特征函数** $\chi_A:U\rightarrow\{0, 1\}$
$$
\chi_A(x) = \begin{cases}
1 & x \in A \\
0 & x \notin A
\end{cases}
$$
建立集合与特征函数的一一对应。这个特征函数又对应了一个01序列！

<img src="离散数学 5 函数.assets/image-20200407015853019.png" alt="image-20200407015853019" style="zoom:67%;" />

<img src="离散数学 5 函数.assets/image-20200407015918326.png" alt="image-20200407015918326" style="zoom:80%;" />

一般，全集的基数为n且有一个 **确定的** 顺序。每一个全集的子集都 **一一对应** 一个n维的0-1向量。将集合运算转化为0-1向量之间的运算！这种向量运算是一种特殊的 **布尔矩阵运算** ！

### 哈希函数

有限集A，n为一确定正整数，则从 $A^*$ （任意长度串）到 $A^n$ （固定长度串）的函数 $H:A^*\rightarrow A^n$ 可称为一个 **哈希函数** ，也称 **散列函数** 或 **杂散函数**

其作用是将任意长度的输入数据打乱、混合、压缩，映射成一个 **定长** 的输出字符串

创建一个叫做 “**摘要**” 的 **数字“指纹”**，使得数据量变小，并将数据格式固定下来

应用：

- 登录：哈希密码
- 数据库：加快查找，先进行哈希值的匹配，再进行逐字比对
- 分布式系统：负载均衡

哈希函数要求：

- 冲突尽可能少：H不可能是单射函数，所以产生 **冲突** 或 **碰撞**
- 散列值应尽可能均匀分布在整个值域范围内

密码学要求：

- 快速
- 单向
- 弱抗碰撞性：给定消息，找另一散列相同的消息在计算上是不可行的
- 强抗碰撞性：找两个散列值相同但实际不同的消息在计算上是不可行的
- 敏感性

### 地板函数和天花板函数

**地板函数** 也称 **下取整函数** 或 **高斯函数**，记作 $\lfloor x\rfloor$

**天花板函数** 也称 **上取整函数**，记作 $\lceil x\rceil$

性质：

- 整数部分可以取出
- $ x - 1 < \lfloor x \rfloor \leq x \leq \lceil x \rceil < x + 1 $
- $\lfloor -x \rfloor = -\lceil x \rceil, \lceil -x \rceil = -\lfloor x \rfloor $

"四舍五入"可以用地板函数或天花板函数表示！

## 置换

非空集合S包含n个元素，S上的一个双射称为S的一个 **n元置换**，表示为：
$$
\pi = \left[\begin{matrix}
x_1 & x_2 & \cdots & x_n \\
f(x_1) & f(x_2) & \cdots & f(x_n)
\end{matrix}\right]
$$
$x_i$ 表示S中的互异元素。n称为置换的 **阶**

置换的表示形式一般 **不唯一**。一般的，若S是有n个元素的有限集，则：

- S的任一个置换都有 n! 种不同的表示
- S共有 n! 个彼此不同的置换

S上的恒等函数称为S的 **恒等置换** 或 **不变置换**

置换存在逆置换

置换可以 **复合**，也称置换的 **乘积** 或 **积**

递归地定义置换的幂为：

- $\pi^0 = 1_S$
- $\pi^n = \pi^{n-1} \circ \pi$

使得 $\pi^k = 1_S$ 成立的最小的正整数 k 称作 $\pi$ 的 **周期**，记作 $per(\pi)$

对于任意的置换，都必然存在周期。

### 轮换

$(a_1, a_2, \cdots, a_r)$ 称为一个 **r-轮换** 或简称 **轮换**，r称作该轮换的 **长度**。2-轮换也称 **对换**

若两个轮换 $\sigma_1 = (a_1, a_2, \cdots, a_r)$ 和 $\sigma_2 = (b_1, b_2, \cdots, b_s)$ 满足 $\{a_1, a_2, \cdots, a_r\} \cap \{b_1, b_2, \cdots, b_s\} = \Phi$ ，则称为 **不相交** 的轮换

**定理**：任一置换可 **唯一** （不计轮换次序）表示成若干不相交轮换的复合（积）。（只有一个轮换会对元素产生作用，其他的都不会对其产生作用）

### 百囚犯问题

<img src="离散数学 5 函数.assets/image-20200407213946060.png" alt="image-20200407213946060" style="zoom:67%;" />

每个置换都可以分解为若干轮换的乘积。抽取只会发生在含有自己编号的轮换中！

成功概率如何计算？计算在 n! 中置换中，存在长度r > 50的轮换的置换个数除以总置换策略个数。
$$
P(\overline{alive}) = \frac{1}{100!}\sum_{l=51}^{100}(\frac{1}{l} \times 100!) = \sum_{l=51}^{100}(\frac{1}{l}) \approx 0.6882 \\
P(alive) = 0.3112
$$
推广这个公式，有：
$$
\sum^{2n}_{l=n+1}\frac{1}{l} \approx 1 - \ln2 \approx 0.6882
$$

- 按此策略，前50个囚犯成功，后50个囚犯必然也成功
- 如果有人打开第50个抽屉才发现自己的号码，全体成功
- 如果规则改为“没有找到自己号码的囚犯被处死”，且存在长度l > 50的轮换，l名囚犯被处死

### 完美洗牌问题

**交错洗牌法** 也称 **完美洗牌发** 或 **鸽尾洗牌法**

- **内洗法**：顶端纸牌在第二位
  - $g(2i+1) = i, g(2i) = 26 +i, 0\leq i \leq 25$
  - 置换周期：52
- **外洗法**：顶端纸牌在第一位
  - $f(2i) = i, f(2i+1) = 26+i, 0\leq i\leq 25$
  - 置换周期：8

## 集合的势

假定A和B是两个集合，如果存在A到B的双射，则称集合A与集合B是 **等势的**，记作 $A\approx B$ 或称A和B的 **基数相等**，记作 $|A| = |B|$

**定理**：集合族（即集合的集合）上的等势关系是 **等价关系** （见二元关系）

- 对 **有限集合**，可以按元素个数划分不同的等价类

**定理**：有限集合不可能与任意其真子集等势

**自然数集合** 和 **自然数的平方集合** 等势

- 存在双射函数 $f(x) = x^2$

可以证明任意无限集必与其某个真子集等势

- 这给出了无限集的本质刻画
- 常用来作为无限集合的定义

<img src="离散数学 5 函数.assets/image-20200407224631601.png" alt="image-20200407224631601" style="zoom:50%;" />

两线段上的点集等势。

因此可以证明实轴上所有开、闭区间等势。

<img src="离散数学 5 函数.assets/image-20200407224805680.png" alt="image-20200407224805680" style="zoom:50%;" />

开区间等势，等势具有传递性。由此双射函数知，线段和直线等势。

自然数集合和整数集合是等势的。

开区间(0, 1)与$(0, 1)\times(0, 1)$等势（开线段与开正方形等势）

实数集和复数集等势：

- $|(0, 1)| = |\R| = |\R \times \R| = |(0, 1)\times (0, 1)|$
- $|\R \times \R| = |\C|$

**自然数集与闭区间[0, 1]不等势**

<img src="离散数学 5 函数.assets/image-20200407225928821.png" alt="image-20200407225928821" style="zoom:80%;" />

**康托定理**：自然数集 $\N$ 和 实数集 $\R$ 不等势

集合A、B：

- 若存在A到B的单射，则称集合A **劣势于** 集合B，记作 $A \leq B$ 或称A的基数小于B的基数，记作$|A|\leq |B|$
- 如果存在A到B的单射，但不存在A到B的双射，则称集合A **严格劣势于** 集合B，记作 A < B，或称A的基数小于B的基数，记作 |A| < |B|

与自然数集合或其子集等势的集合称为 **可数集合** 或 **可列集合**。自然数集合的基数记作 $\aleph_0$ （**阿列夫0**）

否则称作 **不可数集合** 或 **不可列集合**。换言之，集合A，若 $|A| \leq \aleph_0$，称A为可数集或可列集。

全体实数构成的集合R是不可数的，其基数称 **连续统**

**策梅洛定理**：集合A、B基数关系必为三者（大于、小于、等于）其一

**康托-伯恩斯坦-施罗德定理**：集合A、B，若有 $|A|\leq|B|, |B| \leq |A|$ 则有 |A| = |B|。该定理可以用来证明(0, 1)和(0, 1]等势

结合可得：有理数集和整数集等势

**康托定理**：集合A，其幂集${\scr P}(A)$，则必有 $|A| < |{\scr P}(A)|$

- 这一定理表明：不存在基数最大的集合

- $|\C| = |{\scr P}(\N)|$

- 数集之间的基数关系
  $$
  \N\times\N \approx \Q \approx \Z \approx \N < {\scr P}(\N) \approx \C \approx \R
  $$

**连续统假设**：康托猜测，不存在集合A使得$\aleph_0 < |A| < |\R|$，也即 **希尔伯特第一问题**

哥德尔证明了连续统假设与目前使用的公理化集合论体系ZFC不矛盾

- 即不能在ZFC中被证伪

科恩证明了连续统假设和ZFC是彼此独立的

- 即不能在ZFC公理系统内证明其正确与否

